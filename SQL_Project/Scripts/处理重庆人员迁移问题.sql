SELECT * FROM NP_USER nu WHERE nu.NAME NOT IN (SELECT NAME FROM CQDZGCZYXY_ZCGL.NP_USER nu2) AND nu.id  NOT IN (SELECT id FROM CQDZGCZYXY_ZCGL.NP_USER nu2);

SELECT * FROM NP_PASSWORD nu WHERE nu.USERNAME NOT IN (SELECT USERNAME FROM CQDZGCZYXY_ZCGL.NP_PASSWORD nu2) AND nu.USERNAME  NOT IN (SELECT USERNAME FROM CQDZGCZYXY_ZCGL.NP_PASSWORD nu2);

SELECT * FROM AUTHZ_IDENTITY nu WHERE nu.ID NOT IN (SELECT ID FROM CQDZGCZYXY_ZCGL.AUTHZ_IDENTITY nu2) AND nu.NAME  NOT IN (SELECT REPLACE(nu2.NAME,'Identity','i') AS NAME FROM CQDZGCZYXY_ZCGL.AUTHZ_IDENTITY nu2);

--SELECT * FROM AUTHZ_RULE_AUTHORIZATION nu WHERE nu.GRANTEE_ID  NOT IN (SELECT GRANTEE_ID FROM CQDZGCZYXY_ZCGL.AUTHZ_RULE_AUTHORIZATION nu2) AND nu.id  NOT IN (SELECT id FROM CQDZGCZYXY_ZCGL.AUTHZ_RULE_AUTHORIZATION nu2);

SELECT * FROM GAMS_USER_ORG_REL nu WHERE nu.USERID NOT IN (SELECT USERID FROM CQDZGCZYXY_ZCGL.GAMS_USER_ORG_REL nu2) AND nu.id  NOT IN (SELECT id FROM CQDZGCZYXY_ZCGL.GAMS_USER_ORG_REL nu2);

--SELECT * FROM AUTHZ_IDENTITY_ROLE nu WHERE nu.IDENTITY_ID NOT IN (SELECT IDENTITY_ID FROM CQDZGCZYXY_ZCGL.AUTHZ_IDENTITY_ROLE nu2) ;

SELECT * FROM AUTHZ_USER_IDENTITY nu WHERE nu.USER_ID NOT IN (SELECT USER_ID FROM CQDZGCZYXY_ZCGL.AUTHZ_USER_IDENTITY nu2) AND nu.id  NOT IN (SELECT id FROM CQDZGCZYXY_ZCGL.AUTHZ_USER_IDENTITY nu2);

--人员表不需要迁移
SELECT * FROM GAMS_JC_PERSONNEL nu WHERE nu.CODE NOT IN (SELECT CODE FROM CQDZGCZYXY_ZCGL.GAMS_JC_PERSONNEL nu2) AND nu.id  NOT IN (SELECT id FROM CQDZGCZYXY_ZCGL.GAMS_JC_PERSONNEL nu2);

SELECT * FROM AUTHZ_IDENTITY nu WHERE nu.ID NOT IN (SELECT ID FROM CQDZGCZYXY_ZCGL.AUTHZ_IDENTITY nu2) AND nu.NAME  NOT IN (SELECT REPLACE(nu2.NAME,'Identity','i') AS NAME FROM CQDZGCZYXY_ZCGL.AUTHZ_IDENTITY nu2);


CREATE TABLE NP_USER_l AS SELECT * FROM NP_USER nu WHERE nu.NAME NOT IN (SELECT NAME FROM CQDZGCZYXY_ZCGL.NP_USER nu2) AND nu.id  NOT IN (SELECT id FROM CQDZGCZYXY_ZCGL.NP_USER nu2);

CREATE TABLE NP_PASSWORD_l AS SELECT * FROM NP_PASSWORD nu WHERE nu.USERNAME NOT IN (SELECT USERNAME FROM CQDZGCZYXY_ZCGL.NP_PASSWORD nu2) AND nu.USERNAME  NOT IN (SELECT USERNAME FROM CQDZGCZYXY_ZCGL.NP_PASSWORD nu2);

CREATE TABLE AUTHZ_IDENTITY_l AS SELECT * FROM AUTHZ_IDENTITY nu WHERE nu.ID NOT IN (SELECT ID FROM CQDZGCZYXY_ZCGL.AUTHZ_IDENTITY nu2) AND nu.NAME  NOT IN (SELECT REPLACE(nu2.NAME,'Identity','i') AS NAME FROM CQDZGCZYXY_ZCGL.AUTHZ_IDENTITY nu2);

CREATE TABLE GAMS_USER_ORG_REL_l AS SELECT * FROM GAMS_USER_ORG_REL nu WHERE nu.USERID NOT IN (SELECT USERID FROM CQDZGCZYXY_ZCGL.GAMS_USER_ORG_REL nu2) AND nu.id  NOT IN (SELECT id FROM CQDZGCZYXY_ZCGL.GAMS_USER_ORG_REL nu2);

CREATE TABLE AUTHZ_USER_IDENTITY_l AS SELECT * FROM AUTHZ_USER_IDENTITY nu WHERE nu.USER_ID NOT IN (SELECT USER_ID FROM CQDZGCZYXY_ZCGL.AUTHZ_USER_IDENTITY nu2) AND nu.id  NOT IN (SELECT id FROM CQDZGCZYXY_ZCGL.AUTHZ_USER_IDENTITY nu2);

CREATE TABLE AUTHZ_RULE_AUTHORIZATION_l AS SELECT * FROM AUTHZ_RULE_AUTHORIZATION nu WHERE nu.GRANTEE_ID  in('2E1C95EFFD6648C698B775BE46DF29E2',
'3DDEDA18DD754D129051743605B59650',
'B56EAFC32D004CC5BD77F7279F8FBD12',
'61F283B6AA06430983720EAF5D09360A',
'C02AF3F10F9843F49F93721DEE52663A',
'EB783D0C94464C0B9574BEA761CB73BF',
'C31CDC0F0EB048A281744F316A002A36',
'90BA2AB04852475EBC8789881A3A192F',
'BEA95505DA8A4BEA94B8700E5B1B0BB8',
'B57CC29BAD2148C3BAC67CB55174BE4A',
'374AD01FED134F27B66CE186397976EF',
'718DB36AA8D74DF89237989E212D1753',
'B02778594E3642A2B640078650E70ECF',
'5FB4CC86CFDC4D62A1203EED6A64DC88',
'8C80D36969FD477B8DBAF2AD75EE197C',
'AB8929BB331349E584065B9AC13C9EF4',
'343242A2A403470D80EFC318EFB104EC',
'42E50502BE9D45BDB1D262F09D7E56D6',
'F28AD06991A54618BBA69ADBF552F237',
'DC34F6D7113845D493A537BCA7FE401D',
'671F9446B7C44658B4CDBE2F45F10333',
'F62BF5BBDBC24CD9A0C69D76B362477D',
'0C3256DD0230455CB879B973578AF141',
'2BA847DDB49645E9B918C583AE451C6E',
'124C7D68EFBF472F86C7CE802E56632D',
'FE6EDB0852254CBE9F01CE2FBAA6498D',
'B5542422EC6A438C81D64A9E5B15675E',
'1112A2D177904576B3F75F17636D835D',
'445000B419D3433C9D6C6B685C1F958B',
'C8F5338B68B54FF78361E92F75666F6A',
'8CB582621D9F41FF9FCFEFD69EC95621',
'8CD81C5C7DFA46F183F5E485F0F7540D',
'2D519B3DA3444C439FB6C15E2A110D57',
'881839D69D5444DAB811C3587032BCCF',
'2DBBB52942B748BE88DB7D31D1A7CA74',
'CA021068688D45128B69D068F8E957B0',
'6CE7A6C8683B4AADA886880C5204C3AA',
'684F51AD4EB64CA8BED8038524731A59',
'3EB2C8CC69334CDFBADC943EF295C93A',
'EC30B480934347428F653AF51D6F897E',
'212EAB396BA24C8684F83E45E66BD0AC',
'66CCF7C9D8C74B5994172AD81274BE29',
'325B5FCBA159420EAFD8AE66CDFEE7D8',
'B3CD02CCFDB14BDFAA4586DF97498B62',
'9160381CA9D94B75BD30A6FC11E5AB75'
) ;

CREATE TABLE AUTHZ_IDENTITY_ROLE_l AS SELECT * FROM AUTHZ_IDENTITY_ROLE nu WHERE nu.IDENTITY_ID  in('2E1C95EFFD6648C698B775BE46DF29E2',
'3DDEDA18DD754D129051743605B59650',
'B56EAFC32D004CC5BD77F7279F8FBD12',
'61F283B6AA06430983720EAF5D09360A',
'C02AF3F10F9843F49F93721DEE52663A',
'EB783D0C94464C0B9574BEA761CB73BF',
'C31CDC0F0EB048A281744F316A002A36',
'90BA2AB04852475EBC8789881A3A192F',
'BEA95505DA8A4BEA94B8700E5B1B0BB8',
'B57CC29BAD2148C3BAC67CB55174BE4A',
'374AD01FED134F27B66CE186397976EF',
'718DB36AA8D74DF89237989E212D1753',
'B02778594E3642A2B640078650E70ECF',
'5FB4CC86CFDC4D62A1203EED6A64DC88',
'8C80D36969FD477B8DBAF2AD75EE197C',
'AB8929BB331349E584065B9AC13C9EF4',
'343242A2A403470D80EFC318EFB104EC',
'42E50502BE9D45BDB1D262F09D7E56D6',
'F28AD06991A54618BBA69ADBF552F237',
'DC34F6D7113845D493A537BCA7FE401D',
'671F9446B7C44658B4CDBE2F45F10333',
'F62BF5BBDBC24CD9A0C69D76B362477D',
'0C3256DD0230455CB879B973578AF141',
'2BA847DDB49645E9B918C583AE451C6E',
'124C7D68EFBF472F86C7CE802E56632D',
'FE6EDB0852254CBE9F01CE2FBAA6498D',
'B5542422EC6A438C81D64A9E5B15675E',
'1112A2D177904576B3F75F17636D835D',
'445000B419D3433C9D6C6B685C1F958B',
'C8F5338B68B54FF78361E92F75666F6A',
'8CB582621D9F41FF9FCFEFD69EC95621',
'8CD81C5C7DFA46F183F5E485F0F7540D',
'2D519B3DA3444C439FB6C15E2A110D57',
'881839D69D5444DAB811C3587032BCCF',
'2DBBB52942B748BE88DB7D31D1A7CA74',
'CA021068688D45128B69D068F8E957B0',
'6CE7A6C8683B4AADA886880C5204C3AA',
'684F51AD4EB64CA8BED8038524731A59',
'3EB2C8CC69334CDFBADC943EF295C93A',
'EC30B480934347428F653AF51D6F897E',
'212EAB396BA24C8684F83E45E66BD0AC',
'66CCF7C9D8C74B5994172AD81274BE29',
'325B5FCBA159420EAFD8AE66CDFEE7D8',
'B3CD02CCFDB14BDFAA4586DF97498B62',
'9160381CA9D94B75BD30A6FC11E5AB75'
) ;


SELECT * FROM AUTHZ_USER_IDENTITY nu WHERE nu.USER_ID

REPLACE(ProductName,'中心回转','回转中心');
SELECT REPLACE(nu2.NAME,'Identity','i') AS NAME FROM CQDZGCZYXY_ZCGL.AUTHZ_IDENTITY nu2;


SELECT
	USERNAME
FROM
	NP_PASSWORD nu
WHERE
	nu.USERNAME NOT IN (
	SELECT
		USERNAME
	FROM
		CQDZGCZYXY_ZCGL.NP_PASSWORD nu2)
	AND nu.USERNAME NOT IN (
	SELECT
		USERNAME
	FROM
		CQDZGCZYXY_ZCGL.NP_PASSWORD nu2) AND nu.USERNAME NOT IN (SELECT NAME FROM NP_USER nu WHERE nu.NAME NOT IN (SELECT NAME FROM CQDZGCZYXY_ZCGL.NP_USER nu2) AND nu.id  NOT IN (SELECT id FROM CQDZGCZYXY_ZCGL.NP_USER nu2));






















--1、备份表用户相关表
CREATE TABLE NP_USER_bak1217 AS SELECT * FROM  NP_USER;
CREATE TABLE NP_PASSWORD_bak1217 AS SELECT * FROM  NP_PASSWORD;
CREATE TABLE AUTHZ_IDENTITY_bak1217 AS SELECT * FROM  AUTHZ_IDENTITY;
CREATE TABLE GAMS_USER_ORG_REL_bak1217 AS SELECT * FROM  GAMS_USER_ORG_REL;
CREATE TABLE AUTHZ_USER_IDENTITY_bak1217 AS SELECT * FROM  AUTHZ_USER_IDENTITY;
CREATE TABLE AUTHZ_IDENTITY_ROLE_bak1217 AS SELECT * FROM  AUTHZ_IDENTITY_ROLE;
CREATE TABLE AUTHZ_RULE_AUTHORIZATION1217 AS SELECT * FROM  AUTHZ_RULE_AUTHORIZATION;
CREATE TABLE GAMS_JC_PERSONNEL_bak1217 AS SELECT * FROM  GAMS_JC_PERSONNEL;

--2、导入数据库
imp cqdzgczyxy_zcgl/cqdzgczyxy_zcgl@orcl file=C:\Users\ZLM\Desktop\1.dmp full=y ignore=y;

--3、修改字段
alter table NP_USER modify (avatar blob);
alter index xxx rebuild;

--4、插入正式库
INSERT INTO NP_USER SELECT * FROM NP_USER_l;

INSERT INTO NP_PASSWORD SELECT * FROM NP_PASSWORD_l;

INSERT INTO AUTHZ_IDENTITY SELECT * FROM AUTHZ_IDENTITY_l; 

INSERT INTO GAMS_USER_ORG_REL SELECT * FROM GAMS_USER_ORG_REL_l; 

INSERT INTO AUTHZ_USER_IDENTITY SELECT * FROM AUTHZ_USER_IDENTITY_l; 

INSERT INTO AUTHZ_RULE_AUTHORIZATION SELECT * FROM AUTHZ_RULE_AUTHORIZATION_l; 

INSERT INTO AUTHZ_IDENTITY_ROLE SELECT * FROM AUTHZ_IDENTITY_ROLE_l; 


